# 豪華水療管理系統 - 功能說明

## 系統概覽

這是一個完整的豪華水療中心管理系統，包含前端網站和後台管理系統，使用 Firebase 作為後端服務。

---

## 核心功能模塊

### 1. 儀表板 (Dashboard)
- **即時統計數據**
  - 今日預約數量
  - 本月預約總數
  - 總客戶數量
  - 本月營收
  - 電子報訂閱人數
  - 未讀訊息數量

- **會員等級統計**
  - 一般會員
  - 2萬儲值會員
  - 3萬儲值會員
  - 5萬儲值會員
  - VIP會員

- **最近活動**
  - 最近5筆預約記錄
  - 快速查看預約狀態

### 2. 客戶管理 (Customer Management)
- **客戶資料管理**
  - 新增/編輯/刪除客戶
  - 客戶基本資料（姓名、電話、Email）
  - 會員等級管理
  - 儲值餘額追蹤
  - VIP 資格管理

- **會員制度（簡化版）**
  - 一般會員（無折扣，原價消費）
  - VIP會員（所有療程享5折優惠）

- **VIP 自動升級系統**
  - 年度來店滿40次自動符合VIP資格
  - 管理員審核VIP申請
  - VIP有效期限管理（一年）

- **儲值系統（獨立功能）**
  - 儲值不再綁定會員等級
  - 所有會員都可以儲值
  - 每筆儲值產生收據編號（用於比對實體卡）
  - 支援客戶簽名驗證
  - 儲值餘額追蹤和使用記錄

- **客戶篩選**
  - 依會員等級篩選
  - 依VIP資格篩選
  - 搜尋功能

- **客戶詳細資訊**
  - 消費總額
  - 來店次數
  - 最近預約記錄
  - 最近來店記錄
  - 年度統計數據

### 3. 預約管理 (Booking Management)
- **預約記錄管理**
  - 查看所有預約
  - 新增預約
  - 編輯預約資訊
  - 刪除預約
  - 標記預約完成

- **預約狀態**
  - 待確認 (pending)
  - 已確認 (confirmed)
  - 已完成 (completed)
  - 已取消 (cancelled)

- **預約資訊**
  - 客戶姓名
  - 聯絡電話
  - Email
  - 預約日期時間
  - 選擇的服務
  - 服務時長
  - 價格
  - 備註

- **快速操作**
  - 一鍵完成預約
  - 狀態批次更新
  - 客戶資料關聯

### 4. 來店管理 (Visit Management)
- **來店記錄**
  - 記錄每次客戶來店消費
  - 關聯客戶資料
  - 記錄服務項目
  - 記錄價格和折扣

- **付款方式**
  - 現金支付
  - 刷卡支付
  - 儲值扣款

- **價格計算**
  - 原價顯示
  - 會員折扣自動計算
  - 最終價格記錄

- **統計追蹤**
  - 自動更新客戶消費總額
  - 自動更新來店次數
  - 自動計算年度消費
  - 自動檢查VIP資格

### 5. 訊息中心 (Message Center)
- **聯絡訊息管理**
  - 查看所有客戶訊息
  - 標記已讀/未讀
  - 回覆訊息
  - 刪除訊息

- **訊息狀態**
  - 未讀 (unread)
  - 已讀 (read)
  - 已回覆 (replied)

- **訊息篩選**
  - 依狀態篩選
  - 搜尋功能

- **電子報訂閱管理**
  - 查看訂閱者列表
  - 訂閱者語言偏好
  - 訂閱狀態管理
  - 來源追蹤

### 6. 報表分析 (Reports)
- **營收報表**
  - 每日營收趨勢圖
  - 月度營收對比
  - 年度營收統計
  - 付款方式分析
  - 營收來源分析

- **客戶報表**
  - 會員等級分布
  - 新增客戶趨勢
  - 客戶活躍度分析
  - VIP客戶統計

- **服務報表**
  - 熱門服務排行
  - 服務營收貢獻
  - 服務預約頻率

- **多維度數據視覺化**
  - 折線圖（趨勢分析）
  - 圓餅圖（佔比分析）
  - 柱狀圖（對比分析）

### 7. 療程管理 (Service Management)
- **服務項目管理**
  - 新增/編輯/刪除服務
  - 多語言支援（中文、英文、日文）
  - 服務分類
  - 價格管理
  - 服務時長設定

- **服務分類**
  - 臉部護理 (Facial)
  - 身體護理 (Body)
  - 按摩療程 (Massage)
  - 特殊療程 (Special)

- **服務展示**
  - 服務描述
  - 服務效果說明
  - 適用對象
  - 圖片上傳（URL）

### 8. 內容管理 (Content Management)
- **網站內容編輯**
  - 首頁橫幅內容
  - 關於我們頁面
  - 服務介紹頁面
  - 聯絡資訊

- **多語言內容**
  - 中文內容
  - 英文內容
  - 日文內容

- **富文本編輯**
  - 標題編輯
  - 段落內容編輯
  - 圖片URL管理

### 9. 系統設定 (Settings Management)
- **營業時間設定**
  - 每日營業時間設定
  - 彈性休息日設定

- **聯絡資訊**
  - 電話號碼
  - Email地址
  - 實體地址
  - 社群媒體連結

- **預約設定**
  - 預約時段間隔
  - 提前預約天數
  - 取消政策

- **價格設定**
  - 會員折扣比例
  - 特殊優惠設定

---

## 技術特色

### 前端技術
- **React 19** - 最新版本的React框架
- **Vite** - 快速的構建工具
- **Tailwind CSS 4** - 現代化的CSS框架
- **Radix UI** - 高品質的UI組件庫
- **Lucide React** - 美觀的圖標庫
- **Recharts** - 數據視覺化圖表庫
- **React Router DOM** - 路由管理
- **React Hook Form** - 表單管理
- **Zod** - 數據驗證
- **date-fns** - 日期處理

### 後端服務
- **Firebase Authentication** - 用戶認證
- **Cloud Firestore** - NoSQL資料庫
- **Firebase Hosting** - 網站託管
- **Firebase Storage** - 檔案儲存（預留）

### 性能優化
- **代碼分割** - 使用React.lazy動態導入
- **懶加載** - 組件按需加載
- **Suspense** - 優雅的加載狀態處理
- **索引優化** - Firestore查詢索引配置

---

## 資料庫架構

### Collections
1. **customers** - 客戶資料
2. **appointments** - 預約記錄
3. **visits** - 來店記錄
4. **services** - 服務項目
5. **content** - 網站內容
6. **settings** - 系統設定
7. **contact_messages** - 聯絡訊息
8. **newsletter_subscribers** - 電子報訂閱
9. **deposit_records** - 儲值記錄（預留）
10. **balance_usage_records** - 餘額使用記錄（預留）

### 索引配置
- 預約日期和時間複合索引
- 預約狀態和創建時間索引
- 客戶ID和預約日期索引
- 會員等級和創建時間索引
- VIP資格相關索引
- 來店記錄日期索引
- 訊息狀態索引

---

## 安全性

### Firestore Rules
- 公開內容：服務、內容、設定（僅讀取）
- 公開寫入：預約、訊息、電子報訂閱（僅創建）
- 管理員專屬：客戶資料、完整預約管理、來店記錄

### 認證機制
- Firebase Authentication
- 電子郵件/密碼登入
- 登入狀態持久化

---

## 開發工具

### 測試數據腳本
- `scripts/addTestReportData.js` - 生成完整測試數據
  - 8個測試客戶
  - 每個客戶3-8筆來店記錄
  - 每個客戶1-3筆預約記錄
  - 聯絡訊息範例
  - 電子報訂閱範例

### 部署腳本
- `npm run build` - 構建生產版本
- `firebase deploy` - 部署到Firebase
- `firebase deploy --only hosting` - 僅部署靜態檔案
- `firebase deploy --only firestore` - 僅部署資料庫規則

---

## 使用流程

### 管理員日常操作
1. 登入後台系統
2. 查看儀表板了解今日營運狀況
3. 處理新預約（確認或取消）
4. 記錄客戶來店消費
5. 回覆客戶訊息
6. 管理VIP資格審核
7. 查看營收報表
8. 更新服務項目和價格

### 客戶互動流程
1. 客戶從前端網站瀏覽服務
2. 客戶提交預約申請
3. 管理員收到預約通知
4. 管理員確認預約
5. 客戶到店消費
6. 管理員記錄來店記錄
7. 系統自動更新客戶消費統計
8. 符合條件自動標記VIP資格

---

## 未來擴展計畫

### 計畫中的功能
- [ ] 簡訊通知系統
- [ ] Email自動回覆
- [ ] 庫存管理
- [ ] 員工管理
- [ ] 排班系統
- [ ] 會員積分系統
- [ ] 優惠券系統
- [ ] 線上支付整合
- [ ] 客戶評價系統
- [ ] 行動應用程式

### 技術改進
- [ ] PWA支援
- [ ] 離線模式
- [ ] 推送通知
- [ ] 圖片CDN優化
- [ ] 多地區部署
- [ ] 備份和恢復機制

---

## 系統需求

### 開發環境
- Node.js 18+
- pnpm 8+
- Firebase CLI

### 瀏覽器支援
- Chrome (最新版本)
- Firefox (最新版本)
- Safari (最新版本)
- Edge (最新版本)

### 行動設備
- iOS Safari 14+
- Chrome for Android 90+

---

## 維護建議

### 定期任務
- 每週備份資料庫
- 每月檢查VIP資格過期
- 每季度檢視報表分析業績
- 每年更新服務項目和價格

### 監控指標
- 每日活躍用戶數
- 預約轉換率
- 客戶回購率
- 平均消費金額
- 服務滿意度

---

## 支援和文件

- **快速開始**: 查看 `QUICK_START.md`
- **技術文檔**: Firebase 官方文檔
- **問題回報**: GitHub Issues
- **聯絡方式**: 透過系統管理員

---

*最後更新: 2025年1月*
